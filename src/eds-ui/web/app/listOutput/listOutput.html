<div class="module">
	<div class="container-fluid">
		<div class="module-heading">
			List report
			<div class="pull-right">
				<button type="button" class="btn btn-sm btn-success" data-ng-click="listOutputCtrl.save(false)">Save</button>
				<button type="button" class="btn btn-sm btn-warning" data-ng-click="listOutputCtrl.save(true)">Save & Close</button>
				<button type="button" class="btn btn-sm btn-danger" data-ng-click="listOutputCtrl.close()">Cancel</button>
			</div>
		</div>
		<div class="module-body">
			<form>
				<div class="row">
					<div class="form-group col-md-6">
						<label for="name">Name</label>
						<input type="text" class="form-control" id="name" ng-model="listOutputCtrl.libraryItem.name">
					</div>
				</div>
				<div class="row">
					<div class="form-group col-md-12">
						<label for="description">Description</label>
						<textarea class="form-control" id="description" ng-model="listOutputCtrl.libraryItem.description"></textarea>
					</div>
				</div>
				<div class="row">
					<div class="form-group col-md-8">
						<label>List groups</label>
						<button type="button" class="btn btn-xs btn-success" data-ng-click="listOutputCtrl.addListGroup()">
							<span class="fa fa-plus"></span>
						</button>
						<div class="table scroll-box-450 form-control">
							<table class="table table-striped table-condensed">
								<thead>
									<tr>
										<th class="col-md-4">Heading</th>
										<th class="col-md-2">Type</th>
										<th class="col-md-4">Details</th>
										<th class="col-md-2"></th>
									</tr>
								</thead>
								<tbody>
									<tr class="hover-box show-child-on-hover"
											ng-repeat="item in listOutputCtrl.libraryItem.listReport.group"
											ng-click="listOutputCtrl.selectedListReportGroup = item; listOutputCtrl.loadDataSourceAvailableFieldList()"
											ng-class="{'selection': item == listOutputCtrl.selectedListReportGroup}">
										<td>{{item.heading}}</td>
										<td><span class="fa fa-right-pad {{ item | listReportGroupToIcon }} text-muted"></span>{{ item | listReportGroupToTypeName }}</td>
										<td>{{ item | listReportGroupToDescription }}</td>
										<td>
											<div class="child-to-show">
												<button type="button" class="btn btn-danger btn-xs pull-right" ng-click="listOutputCtrl.removeListGroup(this)">
													<span class="fa fa-remove"></span>
												</button>
											</div>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div class="form-group col-md-4" ng-show="listOutputCtrl.selectedListReportGroup">
						<div class="row" ng-show="listOutputCtrl.selectedListReportGroup.fieldBased">
							<div class="form-group col-md-12">
								<label for="fieldBased-dataSource">Data source</label>
								<div class="input-group">
									<input type="text"
												 class="form-control"
												 id="fieldBased-dataSource"
												 value="{{listOutputCtrl.getDatasourceDisplayName()}}" disabled>
									<span class="input-group-addon" ng-click="listOutputCtrl.selectDataSource(listOutputCtrl.selectedListReportGroup.fieldBased)" style="cursor: pointer">
										<i class="fa fa-database" id="fieldBased-dataSource" aria-hidden="true"></i>
									</span>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="form-group col-md-12">
								<label for="group-heading">Heading</label>
								<input type="text" class="form-control" id="group-heading" ng-model="listOutputCtrl.selectedListReportGroup.heading" >
							</div>
						</div>
						<div class="row" ng-show="listOutputCtrl.selectedListReportGroup.fieldBased.dataSource">
							<div class="form-group col-md-12">
								<label for="fieldBased-dataSource">Field output</label>
								<button type="button" class="btn btn-xs btn-success" data-ng-click="listOutputCtrl.addFieldOutput()">
									<span class="fa fa-plus"></span>
								</button>
								<div class="table scroll-box-300 form-control">
									<table class="table table-striped">
										<thead>
											<th class="col-md-5">Field</th>
											<th class="col-md-4">Heading</th>
											<th class="col-md-3"></th>
										</thead>
										<tbody>
											<tr class="hover-box show-child-on-hover"
													ng-repeat="item in listOutputCtrl.selectedListReportGroup.fieldBased.fieldOutput">
												<td>
													<span class="child-to-hide">{{ listOutputCtrl.getFieldDisplayName(item.field) }}</span>
													<div class="btn-group child-to-show" role="group" uib-dropdown>
														<button type="button" class="btn btn-sm btn-default dropdown-toggle" uib-dropdown-toggle aria-haspopup="true" aria-expanded="false">
															{{ listOutputCtrl.getFieldDisplayName(item.field) }}
															<span class="caret"></span>
														</button>
														<ul uib-dropdown-menu>
															<li ng-repeat="field in listOutputCtrl.dataSourceAvailableFields"><a ng-click="listOutputCtrl.setItemField(item, field)">{{ field.displayName }}</a></li>
														</ul>
													</div>
												</td>
												<td>
													<span class="child-to-hide">{{ item.heading }}</span>
													<input type="text" class="form-control input-sm child-to-show" ng-model="item.heading">
												</td>
												<td>
													<div class="pull-right">
														<button type="button" class="btn btn-danger btn-xs child-to-show" ng-click="listOutputCtrl.removeFieldOutput(this)">
															<span class="fa fa-remove"></span>
														</button>
													</div>
												</td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
			</form>
		</div>
	</div>
</div>
